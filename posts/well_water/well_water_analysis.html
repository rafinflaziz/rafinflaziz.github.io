<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Rafi Naufal Aziz">
<meta name="dcterms.date" content="2023-10-12">
<meta name="description" content="Can well water sources in Bandung be grouped into clusters with similar water quality profiles?">

<title>Rafi’s Thoughts Hub - Hierarchical Clustering Analysis of Well Water Quality in Bandung</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.20.0.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Rafi’s Thoughts Hub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts" rel="" target="">
 <span class="menu-text">Notebook</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/rafinflaziz" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/rafinflaziz" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#dataset" id="toc-dataset" class="nav-link" data-scroll-target="#dataset">Dataset</a></li>
  <li><a href="#pre-analysis" id="toc-pre-analysis" class="nav-link" data-scroll-target="#pre-analysis">Pre-analysis</a>
  <ul class="collapse">
  <li><a href="#extract-code-and-water-type" id="toc-extract-code-and-water-type" class="nav-link" data-scroll-target="#extract-code-and-water-type">Extract Code and Water Type</a></li>
  </ul></li>
  <li><a href="#eda" id="toc-eda" class="nav-link" data-scroll-target="#eda">EDA</a>
  <ul class="collapse">
  <li><a href="#univariate-eda" id="toc-univariate-eda" class="nav-link" data-scroll-target="#univariate-eda">Univariate EDA</a>
  <ul class="collapse">
  <li><a href="#number-of-well-in-each-region" id="toc-number-of-well-in-each-region" class="nav-link" data-scroll-target="#number-of-well-in-each-region">Number of Well in Each Region</a></li>
  <li><a href="#number-of-well-from-each-water-type" id="toc-number-of-well-from-each-water-type" class="nav-link" data-scroll-target="#number-of-well-from-each-water-type">Number of Well from Each Water Type</a></li>
  <li><a href="#number-of-well-in-each-region-by-water-type" id="toc-number-of-well-in-each-region-by-water-type" class="nav-link" data-scroll-target="#number-of-well-in-each-region-by-water-type">Number of Well in Each Region by Water Type</a></li>
  <li><a href="#mean-of-substances-concentration-in-each-region" id="toc-mean-of-substances-concentration-in-each-region" class="nav-link" data-scroll-target="#mean-of-substances-concentration-in-each-region">Mean of Substances Concentration in Each Region</a></li>
  <li><a href="#mean-of-substances-concentration-in-each-region-asasam-only" id="toc-mean-of-substances-concentration-in-each-region-asasam-only" class="nav-link" data-scroll-target="#mean-of-substances-concentration-in-each-region-asasam-only">Mean of Substances Concentration in Each Region (AS/ASAM Only)</a></li>
  </ul></li>
  <li><a href="#multivariate-eda" id="toc-multivariate-eda" class="nav-link" data-scroll-target="#multivariate-eda">Multivariate EDA</a>
  <ul class="collapse">
  <li><a href="#substances-concentration-variable" id="toc-substances-concentration-variable" class="nav-link" data-scroll-target="#substances-concentration-variable">Substances Concentration Variable</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#clustering" id="toc-clustering" class="nav-link" data-scroll-target="#clustering">Clustering</a>
  <ul class="collapse">
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a></li>
  <li><a href="#number-of-cluster" id="toc-number-of-cluster" class="nav-link" data-scroll-target="#number-of-cluster">Number of Cluster</a></li>
  <li><a href="#aggregation" id="toc-aggregation" class="nav-link" data-scroll-target="#aggregation">Aggregation</a></li>
  <li><a href="#results-dendrogram" id="toc-results-dendrogram" class="nav-link" data-scroll-target="#results-dendrogram">Results (Dendrogram)</a></li>
  <li><a href="#assign-cluster-for-each-region" id="toc-assign-cluster-for-each-region" class="nav-link" data-scroll-target="#assign-cluster-for-each-region">Assign Cluster for Each Region</a></li>
  </ul></li>
  <li><a href="#geographical-perspective" id="toc-geographical-perspective" class="nav-link" data-scroll-target="#geographical-perspective">Geographical Perspective</a>
  <ul class="collapse">
  <li><a href="#assign-longitude-and-latitude" id="toc-assign-longitude-and-latitude" class="nav-link" data-scroll-target="#assign-longitude-and-latitude">Assign Longitude and Latitude</a></li>
  <li><a href="#final-data" id="toc-final-data" class="nav-link" data-scroll-target="#final-data">Final Data</a></li>
  <li><a href="#plot-according-to-geographical-data" id="toc-plot-according-to-geographical-data" class="nav-link" data-scroll-target="#plot-according-to-geographical-data">Plot According to Geographical Data</a></li>
  <li><a href="#clustering-summary" id="toc-clustering-summary" class="nav-link" data-scroll-target="#clustering-summary">Clustering Summary</a></li>
  </ul></li>
  <li><a href="#recommendation-and-conclusion" id="toc-recommendation-and-conclusion" class="nav-link" data-scroll-target="#recommendation-and-conclusion">Recommendation and Conclusion</a>
  <ul class="collapse">
  <li><a href="#recommendation" id="toc-recommendation" class="nav-link" data-scroll-target="#recommendation">Recommendation</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#reference" id="toc-reference" class="nav-link" data-scroll-target="#reference">Reference</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="well_water_analysis.out.ipynb" download="well_water_analysis.out.ipynb"><i class="bi bi-journal-code"></i>Jupyter</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hierarchical Clustering Analysis of Well Water Quality in Bandung</h1>
  <div class="quarto-categories">
    <div class="quarto-category">project</div>
    <div class="quarto-category">clustering</div>
  </div>
  </div>

<div>
  <div class="description">
    Can well water sources in Bandung be grouped into clusters with similar water quality profiles?
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Rafi Naufal Aziz </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 12, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p><img src="image.png" class="img-fluid"></p>
<section id="background" class="level1">
<h1>Background</h1>
<p>Many regions around the world still face challenges in providing the access to <strong>clean and safe water</strong> to their populations. <strong>Bandung</strong>, one of the largest city in Indonesia, is influenced by multiple industrial activities and urbanization that can damage the water quality in its environment. Many Bandung’s residents rely on <strong>well water</strong> as a primary source of water (including drinking water), making it essential for the government and related institutions to monitor and improve the quality of water from these sources.</p>
<p>This report aims to address the critical issue of well water quality in Bandung by implementing data analysis techniques, specifically <strong>hierarchical clustering</strong> analysis, to provide valuable insights and recommendations for government agencies and institutions responsible for water resource management and public health.</p>
</section>
<section id="objectives" class="level1">
<h1>Objectives</h1>
<p>The primary objectives of this analysis are as follows:</p>
<ol type="1">
<li><strong>Identify Water Quality Clusters</strong>: Through clustering analysis, I aim to group well water sources in Bandung into clusters with similar water quality profiles. These clusters will provide a clearer understanding of regional trends and variations in water quality.</li>
<li><strong>Promote Public Health and Environmental Awareness</strong>: Additionally, this analysis can be seen as a contribution to the enhancement of public health and the preservation of the environment by promoting public health and environmental awareness, especially in the quality of well water for the residents of Bandung.</li>
</ol>
</section>
<section id="dataset" class="level1">
<h1>Dataset</h1>
<p><strong><em>For some privacy reason, I can’t share the dataset source here.</em></strong></p>
<p>The dataset has 160 rows and 11 columns. Let’s take a quick look at the data.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:37.668353Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:36.919477Z&quot;}" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Preview</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_excel(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Data Analisis Statistik-2023-kualitas air-raw.xlsx"</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># We don't need these '&gt;BM xx' data because we don't have information about what these indicators really mean</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Also, for skill demonstration purpose, I will remove the 'Kode' and 'Jenis Air' columns first.</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.drop([<span class="st">'Nomor sampel'</span>, <span class="st">'Kode'</span>, <span class="st">'Jenis Air'</span>, <span class="st">'&gt;BM Cd'</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'&gt;bm Hg'</span>, <span class="st">'&gt;BM Mn'</span>, <span class="st">'&gt;BM Pb'</span>, <span class="st">'&gt;BM Zn'</span>, <span class="st">'&gt;BM Fe'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-1" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;1: Data Snippet</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Sampel ID</th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">No</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>MJ-AS-01</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0026</td>
<td>0.0069</td>
<td>0.0100</td>
<td>1.6585</td>
<td>0.0001</td>
<td>0.3428</td>
<td>0.0001</td>
<td>0.1079</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>MJ-AS-03</td>
<td>0.0212</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0070</td>
<td>0.0077</td>
<td>3.7910</td>
<td>0.0001</td>
<td>0.4119</td>
<td>0.0119</td>
<td>0.0309</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>MJ-AS-04</td>
<td>0.0065</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0062</td>
<td>0.0073</td>
<td>0.0820</td>
<td>0.0001</td>
<td>0.2206</td>
<td>0.0186</td>
<td>0.0521</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>MJ-AS-05</td>
<td>0.0162</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0084</td>
<td>0.0094</td>
<td>1.4833</td>
<td>0.0001</td>
<td>0.4985</td>
<td>0.0001</td>
<td>0.0886</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>MJ-AS-05B</td>
<td>0.0194</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0086</td>
<td>0.0098</td>
<td>2.3356</td>
<td>0.0001</td>
<td>0.1716</td>
<td>0.0196</td>
<td>0.0641</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">156</td>
<td>SR-ASAM-08</td>
<td>0.0164</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0059</td>
<td>0.0024</td>
<td>0.3552</td>
<td>0.0001</td>
<td>0.0012</td>
<td>0.0001</td>
<td>0.0739</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">157</td>
<td>SR-ASAM-14</td>
<td>0.0196</td>
<td>0.0019</td>
<td>0.0171</td>
<td>0.0053</td>
<td>0.0125</td>
<td>0.1067</td>
<td>0.0001</td>
<td>0.7120</td>
<td>0.0495</td>
<td>0.8312</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">158</td>
<td>SR-ASAM-20</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0085</td>
<td>0.0076</td>
<td>0.0089</td>
<td>0.0684</td>
<td>0.0001</td>
<td>1.1956</td>
<td>0.0235</td>
<td>0.0755</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">159</td>
<td>SR-ASAM-21</td>
<td>0.0070</td>
<td>0.0001</td>
<td>0.0015</td>
<td>0.0072</td>
<td>0.0033</td>
<td>0.0547</td>
<td>0.0050</td>
<td>0.1624</td>
<td>0.0001</td>
<td>0.0606</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">160</td>
<td>SR-ASAM-22</td>
<td>0.0110</td>
<td>0.0001</td>
<td>0.0002</td>
<td>0.0054</td>
<td>0.0021</td>
<td>0.0826</td>
<td>0.0001</td>
<td>0.0058</td>
<td>0.0001</td>
<td>0.8351</td>
</tr>
</tbody>
</table>
</div>

<p>160 rows × 11 columns</p>
</div>
</div>
</div>
<p>The first column is an ID where its values are formatted as Region Code-Water Type-Sample Number. As we will see later, there are 2 type of water:</p>
<ul>
<li>ASAM (drinkable)</li>
<li>AS (not drinkable)</li>
</ul>
<p>and 7 different region code:</p>
<ul>
<li>MJ (Majalengka)</li>
<li>BL (Baleendah)</li>
<li>CP (Ciparay)</li>
<li>PC (Pacet)</li>
<li>PL (Pangalengan)</li>
<li>RC (Rancaekek)</li>
<li>SR (Soreang)</li>
</ul>
<p>The rest of the columns are indicators of how much the water is contaminated by the associated substances.</p>
</section>
<section id="pre-analysis" class="level1">
<h1>Pre-analysis</h1>
<section id="extract-code-and-water-type" class="level2">
<h2 class="anchored" data-anchor-id="extract-code-and-water-type">Extract Code and Water Type</h2>
<p>As mentioned earlier, the ID values are formatted as Region Code-Water Type-Sample Number. To make the analysis easier, I will extract the <strong>region code and water type</strong> from the ID value into their own column.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:37.761770Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:37.749517Z&quot;}" data-execution_count="3">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># split the ID value, then get the first string for the region and second string for the type</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Region'</span>] <span class="op">=</span> data[<span class="st">'Sampel ID'</span>].<span class="bu">str</span>.split(<span class="st">'-'</span>).<span class="bu">str</span>[<span class="dv">0</span>]</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Type'</span>] <span class="op">=</span> data[<span class="st">'Sampel ID'</span>].<span class="bu">str</span>.split(<span class="st">'-'</span>).<span class="bu">str</span>[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:37.855745Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:37.843166Z&quot;}" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="4">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-2" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;2: First three rows of modified data</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Sampel ID</th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">Type</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">No</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>MJ-AS-01</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0026</td>
<td>0.0069</td>
<td>0.0100</td>
<td>1.6585</td>
<td>0.0001</td>
<td>0.3428</td>
<td>0.0001</td>
<td>0.1079</td>
<td>MJ</td>
<td>AS</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>MJ-AS-03</td>
<td>0.0212</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0070</td>
<td>0.0077</td>
<td>3.7910</td>
<td>0.0001</td>
<td>0.4119</td>
<td>0.0119</td>
<td>0.0309</td>
<td>MJ</td>
<td>AS</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>MJ-AS-04</td>
<td>0.0065</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0062</td>
<td>0.0073</td>
<td>0.0820</td>
<td>0.0001</td>
<td>0.2206</td>
<td>0.0186</td>
<td>0.0521</td>
<td>MJ</td>
<td>AS</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Great. Now let’s check if the new columns were extracted correctly.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:37.949097Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:37.935579Z&quot;}" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Region unique values:'</span>, data[<span class="st">'Region'</span>].unique())</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Type unique values:'</span>, data[<span class="st">'Type'</span>].unique())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Region unique values: ['MJ' 'BL' 'CP' 'PC' 'PL' 'RC' 'SR']
Type unique values: ['AS' 'ASAM' '08' '11' '12' '13' 'ASAM‐19']</code></pre>
</div>
</div>
<p>Now we have a problem. The <code>type</code> column should only consists of AS or ASAM. As you can see, there’s another value present in this data. Let’s figure out which rows contain these errors.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:38.043491Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:38.028895Z&quot;}" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data[<span class="op">~</span>data[<span class="st">'Sampel ID'</span>].<span class="bu">str</span>.split(<span class="st">'-'</span>).<span class="bu">str</span>[<span class="dv">1</span>].isin([<span class="st">'AS'</span>, <span class="st">'ASAM'</span>])]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-3" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;3: Rows contain errors</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Sampel ID</th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">Type</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">No</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">52</td>
<td>CP-08-AS</td>
<td>0.0155</td>
<td>0.0010</td>
<td>0.0001</td>
<td>0.0128</td>
<td>0.0113</td>
<td>6.2391</td>
<td>0.0001</td>
<td>0.6119</td>
<td>0.0142</td>
<td>0.1370</td>
<td>CP</td>
<td>08</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">53</td>
<td>CP-11-ASAM</td>
<td>0.0190</td>
<td>0.0009</td>
<td>0.0001</td>
<td>0.0172</td>
<td>0.0106</td>
<td>0.2971</td>
<td>0.0001</td>
<td>0.0250</td>
<td>0.0151</td>
<td>0.1104</td>
<td>CP</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>CP-12-AS</td>
<td>0.0134</td>
<td>0.0001</td>
<td>0.0008</td>
<td>0.0186</td>
<td>0.0119</td>
<td>0.2941</td>
<td>0.0001</td>
<td>0.2472</td>
<td>0.0049</td>
<td>0.1761</td>
<td>CP</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">55</td>
<td>CP-13-AS</td>
<td>0.0133</td>
<td>0.0010</td>
<td>0.0016</td>
<td>0.0296</td>
<td>0.0138</td>
<td>3.1102</td>
<td>0.0001</td>
<td>0.4770</td>
<td>0.0055</td>
<td>0.1123</td>
<td>CP</td>
<td>13</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">70</td>
<td>CP-ASAM‐19</td>
<td>0.0023</td>
<td>0.0010</td>
<td>0.0001</td>
<td>0.0135</td>
<td>0.0311</td>
<td>0.1585</td>
<td>0.0001</td>
<td>0.0893</td>
<td>0.0001</td>
<td>0.2647</td>
<td>CP</td>
<td>ASAM‐19</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>Looks like there are only 5 rows that are problematic. Let’s just fix them manually.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:39.962163Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:39.948865Z&quot;}" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data.loc[[<span class="dv">52</span>, <span class="dv">54</span>, <span class="dv">55</span>], <span class="st">'Type'</span>] <span class="op">=</span> <span class="st">'AS'</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data.loc[[<span class="dv">53</span>, <span class="dv">70</span>], <span class="st">'Type'</span>] <span class="op">=</span> <span class="st">'ASAM'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s see if those rows already been changed.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:41.340338Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:41.319089Z&quot;}" data-execution_count="8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data[<span class="op">~</span>data[<span class="st">'Sampel ID'</span>].<span class="bu">str</span>.split(<span class="st">'-'</span>).<span class="bu">str</span>[<span class="dv">1</span>].isin([<span class="st">'AS'</span>, <span class="st">'ASAM'</span>])]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-4" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;4: Modified rows</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Sampel ID</th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">Type</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">No</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">52</td>
<td>CP-08-AS</td>
<td>0.0155</td>
<td>0.0010</td>
<td>0.0001</td>
<td>0.0128</td>
<td>0.0113</td>
<td>6.2391</td>
<td>0.0001</td>
<td>0.6119</td>
<td>0.0142</td>
<td>0.1370</td>
<td>CP</td>
<td>AS</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">53</td>
<td>CP-11-ASAM</td>
<td>0.0190</td>
<td>0.0009</td>
<td>0.0001</td>
<td>0.0172</td>
<td>0.0106</td>
<td>0.2971</td>
<td>0.0001</td>
<td>0.0250</td>
<td>0.0151</td>
<td>0.1104</td>
<td>CP</td>
<td>ASAM</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>CP-12-AS</td>
<td>0.0134</td>
<td>0.0001</td>
<td>0.0008</td>
<td>0.0186</td>
<td>0.0119</td>
<td>0.2941</td>
<td>0.0001</td>
<td>0.2472</td>
<td>0.0049</td>
<td>0.1761</td>
<td>CP</td>
<td>AS</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">55</td>
<td>CP-13-AS</td>
<td>0.0133</td>
<td>0.0010</td>
<td>0.0016</td>
<td>0.0296</td>
<td>0.0138</td>
<td>3.1102</td>
<td>0.0001</td>
<td>0.4770</td>
<td>0.0055</td>
<td>0.1123</td>
<td>CP</td>
<td>AS</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">70</td>
<td>CP-ASAM‐19</td>
<td>0.0023</td>
<td>0.0010</td>
<td>0.0001</td>
<td>0.0135</td>
<td>0.0311</td>
<td>0.1585</td>
<td>0.0001</td>
<td>0.0893</td>
<td>0.0001</td>
<td>0.2647</td>
<td>CP</td>
<td>ASAM</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>I think everything is fine by now. Next, we will proceed into the visualization part.</p>
</section>
</section>
<section id="eda" class="level1">
<h1>EDA</h1>
<p>Before proceeding into the clustering analysis, it is essential to do EDA first in order to gain a deep understanding of the dataset and the patterns it may reveal.</p>
<section id="univariate-eda" class="level2">
<h2 class="anchored" data-anchor-id="univariate-eda">Univariate EDA</h2>
<section id="number-of-well-in-each-region" class="level3">
<h3 class="anchored" data-anchor-id="number-of-well-in-each-region">Number of Well in Each Region</h3>
<p>In the dataset, it is important to notice that each region is represented by a relatively similar number of well samples, ranging from 18 samples to 27 samples. This balanced distribution of data across regions ensures that our analysis and clustering results will be relatively robust and unbiased by its geographical location.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:43.287582Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:43.114475Z&quot;}" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>sns.countplot(data<span class="op">=</span>data, x<span class="op">=</span><span class="st">'Region'</span>, order<span class="op">=</span>data[<span class="st">'Region'</span>].value_counts().index, color<span class="op">=</span><span class="st">"tab:green"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Number of Well in Each Region"</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-1-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Number of well in each region</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="number-of-well-from-each-water-type" class="level3">
<h3 class="anchored" data-anchor-id="number-of-well-from-each-water-type">Number of Well from Each Water Type</h3>
<p>However, there are higher number of well with undrinkable water (AS) in comparison to well with drinkable water (ASAM). This disproportion emphasizes a significant concern regarding the availability of safe drinking water sources in the regions of Bandung, as a considerably larger proportion of the wells are observed to exhibit water quality issues.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:44.753753Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:44.653035Z&quot;}" data-execution_count="10">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>sns.countplot(data<span class="op">=</span>data, x<span class="op">=</span><span class="st">'Type'</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Number of Well from Each Water Type"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-2-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Number of Well from Each Water Type</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="number-of-well-in-each-region-by-water-type" class="level3">
<h3 class="anchored" data-anchor-id="number-of-well-in-each-region-by-water-type">Number of Well in Each Region by Water Type</h3>
<p>While several regions like Pacet and Pangalengan already have more drinkable-water wells than undrinkable ones, most of the regions still grapple with a concerning disparity. In these areas, the amount of undrinkable-water wells not only surpasses their drinkable counterparts but does so by a substantial margin.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:46.351031Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:46.156816Z&quot;}" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>sns.countplot(x<span class="op">=</span><span class="st">'Region'</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>              data<span class="op">=</span>data,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>              order<span class="op">=</span>[<span class="st">'BL'</span>, <span class="st">'CP'</span>, <span class="st">'MJ'</span>, <span class="st">'PC'</span>, <span class="st">'PL'</span>, <span class="st">'RC'</span>, <span class="st">'SR'</span>],</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>              hue<span class="op">=</span><span class="st">'Type'</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Number of Well in Each Region by Water Type"</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-3-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Number of Well in Each Region by Water Type</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mean-of-substances-concentration-in-each-region" class="level3">
<h3 class="anchored" data-anchor-id="mean-of-substances-concentration-in-each-region">Mean of Substances Concentration in Each Region</h3>
<p>In any region, calculated by the mean of concentration, three substances dominates among another: iron (Fe), manganese (Mn), and zinc (Zn). In most of the regions, wells are heavily contaminated by iron. Some exceptions are Pacet and Pangalengan, where the wells are contaminated dominantly by manganese, and Soreang, where the wells are contaminated by iron and manganese equally.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T13:52:30.424354Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T13:52:30.003584Z&quot;}" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>data_gp <span class="op">=</span> data.iloc[:, <span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>].groupby([<span class="st">'Region'</span>]).agg(<span class="st">'mean'</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> data_gp.reset_index()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>res_wide <span class="op">=</span> res.melt(id_vars<span class="op">=</span><span class="st">"Region"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="fl">9.5</span>))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span><span class="st">"Region"</span>, y<span class="op">=</span><span class="st">"value"</span>, data<span class="op">=</span>res_wide, hue<span class="op">=</span><span class="st">'variable'</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Mean of Substances Concentration in Each Region'</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">''</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-4-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;4: Mean of Substances Concentration in Each Region</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mean-of-substances-concentration-in-each-region-asasam-only" class="level3">
<h3 class="anchored" data-anchor-id="mean-of-substances-concentration-in-each-region-asasam-only">Mean of Substances Concentration in Each Region (AS/ASAM Only)</h3>
<p>If we take a look back at <a href="#fig-3">Figure&nbsp;3</a>, Pacet and Pangalengan are the only region that have more drinkable-water water source than the undrinkable one. This may suggest that low level of iron (or high level of manganese) contamination is one of the indicator for a healthy, drinkable water.</p>
<p>However, if we look at the next two plots, where these are similar to <a href="#fig-4">Figure&nbsp;4</a> but separated by the water type, there are undrinkable water with high level of manganese as well as drinkable water with high level of iron. Therefore, at least for now, neither manganese contamination level nor iron contamination level can be considered as an indicator of undrinkable water.</p>
<div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data_gp <span class="op">=</span> data[data[<span class="st">'Type'</span>] <span class="op">==</span> <span class="st">'AS'</span>].iloc[:, <span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>].groupby([<span class="st">'Region'</span>]).agg(<span class="st">'mean'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> data_gp.reset_index()</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>res_wide<span class="op">=</span>res.melt(id_vars<span class="op">=</span><span class="st">"Region"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="fl">9.5</span>))</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span><span class="st">"Region"</span>, y<span class="op">=</span><span class="st">"value"</span>,data<span class="op">=</span>res_wide, hue<span class="op">=</span><span class="st">'variable'</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Mean of Substances Concentration in Each Region (AS Only)'</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">''</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="fl">2.5</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>data_gp <span class="op">=</span> data[data[<span class="st">'Type'</span>] <span class="op">==</span> <span class="st">'ASAM'</span>].iloc[:, <span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>].groupby([<span class="st">'Region'</span>]).agg(<span class="st">'mean'</span>)</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> data_gp.reset_index()</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>res_wide<span class="op">=</span>res.melt(id_vars<span class="op">=</span><span class="st">"Region"</span>)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>,<span class="fl">9.5</span>))</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>sns.barplot(x<span class="op">=</span><span class="st">"Region"</span>, y<span class="op">=</span><span class="st">"value"</span>,data<span class="op">=</span>res_wide, hue<span class="op">=</span><span class="st">'variable'</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Mean of Substances Concentration in Each Region (ASAM Only)'</span>)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">''</span>)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>plt.ylim(<span class="dv">0</span>, <span class="fl">2.5</span>)</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-5" class="cell quarto-layout-panel" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T13:52:31.327656Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T13:52:30.426361Z&quot;}" data-execution_count="13">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-5-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-5-output-1.png" class="img-fluid figure-img" data-ref-parent="fig-5"></p>
<figcaption class="figure-caption">(a) (AS Only)</figcaption>
</figure>
</div>
</div>
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-5-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-5-output-2.png" class="img-fluid figure-img" data-ref-parent="fig-5"></p>
<figcaption class="figure-caption">(b) (ASAM Only)</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;5: Mean of Substances Concentration in Each Region</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
<section id="multivariate-eda" class="level2">
<h2 class="anchored" data-anchor-id="multivariate-eda">Multivariate EDA</h2>
<section id="substances-concentration-variable" class="level3">
<h3 class="anchored" data-anchor-id="substances-concentration-variable">Substances Concentration Variable</h3>
<p>Regarding the variables related to substances concentration, every single one of them has a positive skewed distribution. Because the plot for all 10 substances is too large, as an example, I will only show the distribution of three variable along with the correlation between each two of them.</p>
<p>As for the results, there isn’t any notable result except for the fact that the Cadmium (Cd) and Lead (Pb) are highly correlated. Deeper knowledge about chemistry and water engineering might be needed to gain meaningful insights from this result.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:33:54.553959Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:33:51.607749Z&quot;}" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> pearsonr</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> corrfunc(x, y, ax<span class="op">=</span><span class="va">None</span>, hue<span class="op">=</span><span class="va">None</span>, <span class="op">**</span>kws):</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Plot the correlation coefficient in the top left hand corner of a plot."""</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    r, _ <span class="op">=</span> pearsonr(x, y)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> ax <span class="kw">or</span> plt.gca()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    ax.annotate(<span class="ss">f'ρ = </span><span class="sc">{</span>r<span class="sc">:.2f}</span><span class="ss">'</span>, xy<span class="op">=</span>(<span class="fl">.1</span>, <span class="fl">.9</span>), xycoords<span class="op">=</span>ax.transAxes)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> sns.pairplot(data<span class="op">=</span>data[[<span class="st">'Pb'</span>, <span class="st">'Cd'</span>, <span class="st">'Hg'</span>, <span class="st">'Type'</span>]], hue<span class="op">=</span><span class="st">'Type'</span>, diag_kind<span class="op">=</span><span class="st">'hist'</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>g.map_lower(corrfunc)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-6" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-6-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;6: Distribution of 3 (out of 10) substance along with correlation between each two of them</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="clustering" class="level1">
<h1>Clustering</h1>
<p>We now turn our attention to the core of our analysis: clustering analysis.</p>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>In this analysis, I will specifically use <strong>hierarchical clustering</strong> method with four kinds of linkage:</p>
<ol type="1">
<li><strong>Single linkage</strong>, where the distance of two clusters A and B is defined with the <strong>minimum</strong> distance between a point in A and a point in B. <span id="eq-single-linkage"><span class="math display">\[
{\displaystyle \min _{a\in A,\,b\in B}d(a,b)}
\tag{1}\]</span></span></li>
<li><strong>Complete linkage</strong>, where the distance of two clusters A and B is defined with the <strong>maximum</strong> distance between a point in A and a point in B. <span class="math display">\[
{\displaystyle \max _{a\in A,\,b\in B}d(a,b)}
\]</span> {#complete-linkage}</li>
<li><strong>Average linkage</strong>, where the distance between two clusters A and B is defined as the <strong>average</strong> of the distances between every points in A and every points in B. <span class="math display">\[
{\displaystyle {\frac {1}{|A|\cdot |B|}}\sum _{a\in A}\sum _{b\in B}d(a,b)}
\]</span> {#average-linkage}</li>
<li><strong>Ward’s linkage</strong>, where at each step, it joins two clusters A and B that minimize the increase in SSE (sum-squared error) defined as below. <span class="math display">\[
SSE = \sum _{x\in A\cup B}\lVert x-\mu _{A\cup B}\rVert ^{2}-\sum _{x\in A}\lVert x-\mu _{A}\rVert ^{2}-\sum _{x\in B}\lVert x-\mu _{B}\rVert ^{2}
\]</span> {#ward-linkage}</li>
</ol>
<p>Note that at each step in single linkage, complete linkage, and average linkage, they join the two clusters with the smallest distance, as measured with the respective distance definition.</p>
<p>In python, you can perform hierarchical analysis by utilizing the functions offered by the <a href="https://docs.scipy.org/doc/scipy/reference/cluster.hierarchy.html">SciPy</a> package.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:34:00.668075Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:34:00.650364Z&quot;}" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.cluster.hierarchy <span class="im">import</span> dendrogram, linkage</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you are not familiar yet with the concept of hierarchical clustering, I suggest you to read <a href="https://towardsdatascience.com/understanding-the-concept-of-hierarchical-clustering-technique-c6e8243758ec">this article</a> and <a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">this wikipedia page</a>.</p>
</div>
</div>
</section>
<section id="number-of-cluster" class="level2">
<h2 class="anchored" data-anchor-id="number-of-cluster">Number of Cluster</h2>
<p>From previous EDA, we have seen that the data often can be divided into three categories. For example, in <a href="#fig-3">Figure&nbsp;3</a>, we can categorize the data like this</p>
<ol type="1">
<li>region where the number of AS well-water is more than ASAM water,</li>
<li>region where the number of ASAM well-water is more than AS, and</li>
<li>region where the number of AS well-water and ASAM well-water are equal.</li>
</ol>
<p>Another example is present in figure 8, where we can categorize the data like this 1. region where the concentration mean of iron is higher than manganese, 2. region where the concentration mean of manganese is higher than iron, and 3. region where the concentration mean of iron and manganese are equal.</p>
<p>Therefore, given the results of what we’ve explored (that sugggests there is an inherent structure and pattern in the data), I will choose <strong>three</strong> as the number of cluster in this analysis. Of course, these categorization may seems arbitrary (indeed they are). However, as we will see in the clustering result, the selection of three clusters is not a bad decision.</p>
</section>
<section id="aggregation" class="level2">
<h2 class="anchored" data-anchor-id="aggregation">Aggregation</h2>
<p>The clustering process will be based on the substances concentrations value at each region. Because one region contains several wells, we need to aggregate them first. In this analysis I use the mean aggregation. You can see the result as below.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:34:03.578989Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:34:03.551240Z&quot;}" data-execution_count="14">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> data.iloc[:, <span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>agg_mean <span class="op">=</span> data.groupby(<span class="st">'Region'</span>).agg(<span class="st">'mean'</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>agg_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-5" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;5: Aggregated Data</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">BL</td>
<td>0.011117</td>
<td>0.001004</td>
<td>0.001029</td>
<td>0.008858</td>
<td>0.014692</td>
<td>0.973554</td>
<td>0.013504</td>
<td>0.377721</td>
<td>0.009838</td>
<td>0.455558</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">CP</td>
<td>0.012358</td>
<td>0.000517</td>
<td>0.000938</td>
<td>0.014554</td>
<td>0.013850</td>
<td>1.534404</td>
<td>0.000308</td>
<td>0.711413</td>
<td>0.007667</td>
<td>0.130892</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">MJ</td>
<td>0.008978</td>
<td>0.001396</td>
<td>0.000778</td>
<td>0.008219</td>
<td>0.008593</td>
<td>1.746515</td>
<td>0.000100</td>
<td>0.500022</td>
<td>0.019404</td>
<td>0.112393</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">PC</td>
<td>0.012085</td>
<td>0.000790</td>
<td>0.001235</td>
<td>0.009540</td>
<td>0.011375</td>
<td>0.461930</td>
<td>0.000100</td>
<td>1.225370</td>
<td>0.013360</td>
<td>0.048860</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">PL</td>
<td>0.009483</td>
<td>0.000633</td>
<td>0.002061</td>
<td>0.009728</td>
<td>0.009356</td>
<td>0.269589</td>
<td>0.008478</td>
<td>0.775944</td>
<td>0.005300</td>
<td>0.252650</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">RC</td>
<td>0.013460</td>
<td>0.001476</td>
<td>0.000780</td>
<td>0.011820</td>
<td>0.009332</td>
<td>0.999200</td>
<td>0.000100</td>
<td>0.658616</td>
<td>0.029140</td>
<td>0.143132</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">SR</td>
<td>0.009836</td>
<td>0.001145</td>
<td>0.001818</td>
<td>0.006677</td>
<td>0.005350</td>
<td>0.718868</td>
<td>0.004595</td>
<td>0.833150</td>
<td>0.018445</td>
<td>0.156645</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</section>
<section id="results-dendrogram" class="level2">
<h2 class="anchored" data-anchor-id="results-dendrogram">Results (Dendrogram)</h2>
<p>After applying the four clustering methods to the aggregated data, we achieve four dendrograms for each methods.</p>
<p>According to the single method, we can see that <strong>CP</strong> with <strong>MJ</strong> are the most similar ones, therefore they might be belong to the same cluster. On the other side, we can also see that <strong>RC</strong> and <strong>SR</strong> are similar, so they might have their own cluster too. The next point that is closer to <strong>RC</strong> and <strong>SR</strong> is <strong>BL</strong>, followed by <strong>PL</strong> and <strong>PC</strong>.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:34:05.844204Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:34:05.655906Z&quot;}" data-execution_count="15">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>agg_mean <span class="op">=</span> data.groupby(<span class="st">'Region'</span>).agg(<span class="st">'mean'</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> linkage(agg_mean, <span class="st">'single'</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">10</span>))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>dn <span class="op">=</span> dendrogram(Z, labels<span class="op">=</span>agg_mean.index)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Single'</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-7" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-7-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;7: Dendrogram of Single Ward Method</figcaption>
</figure>
</div>
</div>
</div>
<p>In fact, if we look at the next three dendrogram resulting from the average linkage, complete linkage, and ward linkage, we can see the similar pattern with only a slight difference. In these three methods, BL-RC-SR cluster are joined with the PC-PL cluster, rather than joined with PL and then PC like we have seen from the single linkage.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:36:08.070046Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:36:07.568325Z&quot;}" data-execution_count="19">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> linkage(agg_mean, <span class="st">'average'</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">10</span>))</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>dn <span class="op">=</span> dendrogram(Z, labels<span class="op">=</span>agg_mean.index)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Average'</span>)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-8" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-8-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;8: Dendrogram of Average Method</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T13:52:33.771186Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T13:52:33.599130Z&quot;}" data-execution_count="19">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> linkage(agg_mean, <span class="st">'complete'</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">10</span>))</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>dn <span class="op">=</span> dendrogram(Z, labels<span class="op">=</span>agg_mean.index)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Complete'</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-9" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-9-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;9: Dendrogram of Complete Method</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T13:52:33.945798Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T13:52:33.773145Z&quot;}" data-execution_count="20">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> linkage(agg_mean, <span class="st">'ward'</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">10</span>))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>dn <span class="op">=</span> dendrogram(Z, labels<span class="op">=</span>agg_mean.index)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Ward'</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-10" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="well_water_analysis_files/figure-html/fig-10-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;10: Dendrogram of Ward Method</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="assign-cluster-for-each-region" class="level2">
<h2 class="anchored" data-anchor-id="assign-cluster-for-each-region">Assign Cluster for Each Region</h2>
<p>Here we create new column that indicates which cluster each well belongs to (according to the region).</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:37:29.518382Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:37:29.502013Z&quot;}" data-execution_count="20">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>cluster_raw_single <span class="op">=</span> {<span class="st">"CP|MJ"</span>:<span class="dv">1</span>, <span class="st">"PC"</span>:<span class="dv">2</span>, <span class="st">"PL|BL|RC|SR"</span>:<span class="dv">3</span>}</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Single'</span>] <span class="op">=</span> data[<span class="st">'Region'</span>].replace(cluster_raw_single, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>cluster_raw_avg <span class="op">=</span> {<span class="st">"CP|MJ"</span>:<span class="dv">1</span>, <span class="st">"BL|RC|SR"</span>:<span class="dv">2</span>, <span class="st">"PC|PL"</span>:<span class="dv">3</span>}</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Others'</span>] <span class="op">=</span> data[<span class="st">'Region'</span>].replace(cluster_raw_avg, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># make it recognized as a category</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Single'</span>] <span class="op">=</span> data[<span class="st">'Single'</span>].astype(<span class="st">'object'</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'Others'</span>] <span class="op">=</span> data[<span class="st">'Others'</span>].astype(<span class="st">'object'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T13:52:33.992533Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T13:52:33.964462Z&quot;}" data-execution_count="22">
<div class="cell-output cell-output-display" data-execution_count="22">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-6" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;6: Data After Cluster Assignment</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">Single</th>
<th data-quarto-table-cell-role="th">Others</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">No</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0026</td>
<td>0.0069</td>
<td>0.0100</td>
<td>1.6585</td>
<td>0.0001</td>
<td>0.3428</td>
<td>0.0001</td>
<td>0.1079</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0.0212</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0070</td>
<td>0.0077</td>
<td>3.7910</td>
<td>0.0001</td>
<td>0.4119</td>
<td>0.0119</td>
<td>0.0309</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.0065</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0062</td>
<td>0.0073</td>
<td>0.0820</td>
<td>0.0001</td>
<td>0.2206</td>
<td>0.0186</td>
<td>0.0521</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>0.0162</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0084</td>
<td>0.0094</td>
<td>1.4833</td>
<td>0.0001</td>
<td>0.4985</td>
<td>0.0001</td>
<td>0.0886</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>0.0194</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0086</td>
<td>0.0098</td>
<td>2.3356</td>
<td>0.0001</td>
<td>0.1716</td>
<td>0.0196</td>
<td>0.0641</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">156</td>
<td>0.0164</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0059</td>
<td>0.0024</td>
<td>0.3552</td>
<td>0.0001</td>
<td>0.0012</td>
<td>0.0001</td>
<td>0.0739</td>
<td>SR</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">157</td>
<td>0.0196</td>
<td>0.0019</td>
<td>0.0171</td>
<td>0.0053</td>
<td>0.0125</td>
<td>0.1067</td>
<td>0.0001</td>
<td>0.7120</td>
<td>0.0495</td>
<td>0.8312</td>
<td>SR</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">158</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0085</td>
<td>0.0076</td>
<td>0.0089</td>
<td>0.0684</td>
<td>0.0001</td>
<td>1.1956</td>
<td>0.0235</td>
<td>0.0755</td>
<td>SR</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">159</td>
<td>0.0070</td>
<td>0.0001</td>
<td>0.0015</td>
<td>0.0072</td>
<td>0.0033</td>
<td>0.0547</td>
<td>0.0050</td>
<td>0.1624</td>
<td>0.0001</td>
<td>0.0606</td>
<td>SR</td>
<td>3</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">160</td>
<td>0.0110</td>
<td>0.0001</td>
<td>0.0002</td>
<td>0.0054</td>
<td>0.0021</td>
<td>0.0826</td>
<td>0.0001</td>
<td>0.0058</td>
<td>0.0001</td>
<td>0.8351</td>
<td>SR</td>
<td>3</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>

<p>160 rows × 13 columns</p>
</div>
</div>
</div>
</section>
</section>
<section id="geographical-perspective" class="level1">
<h1>Geographical Perspective</h1>
<section id="assign-longitude-and-latitude" class="level2">
<h2 class="anchored" data-anchor-id="assign-longitude-and-latitude">Assign Longitude and Latitude</h2>
<p>To support our consideration, let’s take a look at how these cluster represents the regions in geographical perspective.</p>
<p>It’s not hard to acquire longitude and latitude data for each region. I manually input them from Google Maps. For the plotting, I use <a href="https://plotly.com/python/plotly-express/">Plotly Express</a>.</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:37:35.881133Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:37:35.866598Z&quot;}" data-execution_count="21">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>replacer_long <span class="op">=</span> {<span class="st">"MJ"</span>: <span class="fl">107.746994</span>, <span class="st">"BL"</span>: <span class="fl">107.631878</span>, <span class="st">"RC"</span>: <span class="fl">107.759404</span>, <span class="st">"SR"</span>: <span class="fl">107.532008</span>, <span class="st">"PL"</span>: <span class="fl">107.566423</span>, <span class="st">"PC"</span>: <span class="fl">107.698135</span>, <span class="st">"CP"</span>: <span class="fl">107.710501</span>}</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>replacer_lat <span class="op">=</span> {<span class="st">"MJ"</span>: <span class="op">-</span><span class="fl">7.054680</span>, <span class="st">"BL"</span>: <span class="op">-</span><span class="fl">7.004517</span>, <span class="st">"RC"</span>: <span class="op">-</span><span class="fl">6.971517</span>, <span class="st">"SR"</span>: <span class="op">-</span><span class="fl">7.025404</span>, <span class="st">"PL"</span>: <span class="op">-</span><span class="fl">7.195907</span>, <span class="st">"PC"</span>: <span class="op">-</span><span class="fl">7.119608</span>, <span class="st">"CP"</span>: <span class="op">-</span><span class="fl">7.037803</span>}</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'longitude'</span>] <span class="op">=</span> data[<span class="st">'Region'</span>].replace(replacer_long).astype(<span class="bu">float</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'latitude'</span>] <span class="op">=</span> data[<span class="st">'Region'</span>].replace(replacer_lat).astype(<span class="bu">float</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="final-data" class="level2">
<h2 class="anchored" data-anchor-id="final-data">Final Data</h2>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:37:38.354428Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:37:38.330877Z&quot;}" data-execution_count="22">
<div class="cell-output cell-output-display" data-execution_count="22">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>

<div id="tbl-7" class="anchored">
<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<caption>Table&nbsp;7: Final Form of The Data</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">As</th>
<th data-quarto-table-cell-role="th">Cd</th>
<th data-quarto-table-cell-role="th">Co</th>
<th data-quarto-table-cell-role="th">Cr</th>
<th data-quarto-table-cell-role="th">Cu</th>
<th data-quarto-table-cell-role="th">Fe</th>
<th data-quarto-table-cell-role="th">Hg</th>
<th data-quarto-table-cell-role="th">Mn</th>
<th data-quarto-table-cell-role="th">Pb</th>
<th data-quarto-table-cell-role="th">Zn</th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">Single</th>
<th data-quarto-table-cell-role="th">Others</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">latitude</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">No</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0026</td>
<td>0.0069</td>
<td>0.0100</td>
<td>1.6585</td>
<td>0.0001</td>
<td>0.3428</td>
<td>0.0001</td>
<td>0.1079</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
<td>107.746994</td>
<td>-7.054680</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>0.0212</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0070</td>
<td>0.0077</td>
<td>3.7910</td>
<td>0.0001</td>
<td>0.4119</td>
<td>0.0119</td>
<td>0.0309</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
<td>107.746994</td>
<td>-7.054680</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>0.0065</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0062</td>
<td>0.0073</td>
<td>0.0820</td>
<td>0.0001</td>
<td>0.2206</td>
<td>0.0186</td>
<td>0.0521</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
<td>107.746994</td>
<td>-7.054680</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>0.0162</td>
<td>0.0006</td>
<td>0.0001</td>
<td>0.0084</td>
<td>0.0094</td>
<td>1.4833</td>
<td>0.0001</td>
<td>0.4985</td>
<td>0.0001</td>
<td>0.0886</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
<td>107.746994</td>
<td>-7.054680</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>0.0194</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0086</td>
<td>0.0098</td>
<td>2.3356</td>
<td>0.0001</td>
<td>0.1716</td>
<td>0.0196</td>
<td>0.0641</td>
<td>MJ</td>
<td>1</td>
<td>1</td>
<td>107.746994</td>
<td>-7.054680</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">156</td>
<td>0.0164</td>
<td>0.0001</td>
<td>0.0001</td>
<td>0.0059</td>
<td>0.0024</td>
<td>0.3552</td>
<td>0.0001</td>
<td>0.0012</td>
<td>0.0001</td>
<td>0.0739</td>
<td>SR</td>
<td>3</td>
<td>2</td>
<td>107.532008</td>
<td>-7.025404</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">157</td>
<td>0.0196</td>
<td>0.0019</td>
<td>0.0171</td>
<td>0.0053</td>
<td>0.0125</td>
<td>0.1067</td>
<td>0.0001</td>
<td>0.7120</td>
<td>0.0495</td>
<td>0.8312</td>
<td>SR</td>
<td>3</td>
<td>2</td>
<td>107.532008</td>
<td>-7.025404</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">158</td>
<td>0.0062</td>
<td>0.0001</td>
<td>0.0085</td>
<td>0.0076</td>
<td>0.0089</td>
<td>0.0684</td>
<td>0.0001</td>
<td>1.1956</td>
<td>0.0235</td>
<td>0.0755</td>
<td>SR</td>
<td>3</td>
<td>2</td>
<td>107.532008</td>
<td>-7.025404</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">159</td>
<td>0.0070</td>
<td>0.0001</td>
<td>0.0015</td>
<td>0.0072</td>
<td>0.0033</td>
<td>0.0547</td>
<td>0.0050</td>
<td>0.1624</td>
<td>0.0001</td>
<td>0.0606</td>
<td>SR</td>
<td>3</td>
<td>2</td>
<td>107.532008</td>
<td>-7.025404</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">160</td>
<td>0.0110</td>
<td>0.0001</td>
<td>0.0002</td>
<td>0.0054</td>
<td>0.0021</td>
<td>0.0826</td>
<td>0.0001</td>
<td>0.0058</td>
<td>0.0001</td>
<td>0.8351</td>
<td>SR</td>
<td>3</td>
<td>2</td>
<td>107.532008</td>
<td>-7.025404</td>
</tr>
</tbody>
</table>
</div>

<p>160 rows × 15 columns</p>
</div>
</div>
</div>
</section>
<section id="plot-according-to-geographical-data" class="level2">
<h2 class="anchored" data-anchor-id="plot-according-to-geographical-data">Plot According to Geographical Data</h2>
<p>Remember that we have two distinct results: one from single method, one from the other methods. Here is both results plotted on a map (<em>it’s interactive</em>!).</p>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:38:53.696014Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:38:53.691014Z&quot;}" data-execution_count="24">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.io <span class="im">as</span> pio</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>pio.renderers.default <span class="op">=</span> <span class="st">"plotly_mimetype+notebook_connected"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:38:55.866924Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:38:55.793322Z&quot;}" data-execution_count="25">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>data_agg <span class="op">=</span> data.groupby([<span class="st">'Region'</span>]).agg(<span class="st">'mean'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_mapbox(data_agg, </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                        lat<span class="op">=</span><span class="st">"latitude"</span>, </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                        lon<span class="op">=</span><span class="st">"longitude"</span>, </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                        color<span class="op">=</span><span class="st">"Single"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                        color_discrete_sequence<span class="op">=</span>px.colors.qualitative.G10,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>                        zoom<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>                        height<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>                        width<span class="op">=</span><span class="dv">700</span>,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                        text <span class="op">=</span> <span class="bu">list</span>(data_agg.index))</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>fig.update_layout(mapbox_style<span class="op">=</span><span class="st">"carto-positron"</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>fig.update_layout(margin<span class="op">=</span>{<span class="st">"r"</span>:<span class="dv">0</span>,<span class="st">"t"</span>:<span class="dv">0</span>,<span class="st">"l"</span>:<span class="dv">0</span>,<span class="st">"b"</span>:<span class="dv">0</span>})</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>fig.update_traces(marker<span class="op">=</span>{<span class="st">'size'</span>: <span class="dv">15</span>})</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>fig.update_traces(textposition<span class="op">=</span><span class="st">'top center'</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-11" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="7be7cdd8-82c4-4655-b79f-724d77ee6d7f" class="plotly-graph-div" style="height:500px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("7be7cdd8-82c4-4655-b79f-724d77ee6d7f")) {                    Plotly.newPlot(                        "7be7cdd8-82c4-4655-b79f-724d77ee6d7f",                        [{"hovertemplate":"Single=3.0<br>text=%{text}<br>latitude=%{lat}<br>longitude=%{lon}<extra></extra>","lat":[-7.004517,-7.195907000000001,-6.971517,-7.025404],"legendgroup":"3.0","lon":[107.63187799999999,107.566423,107.75940399999999,107.532008],"marker":{"color":"#3366CC","size":15},"mode":"markers+text","name":"3.0","showlegend":true,"subplot":"mapbox","text":["BL","PL","RC","SR"],"type":"scattermapbox","textposition":"top center"},{"hovertemplate":"Single=1.0<br>text=%{text}<br>latitude=%{lat}<br>longitude=%{lon}<extra></extra>","lat":[-7.037803,-7.05468],"legendgroup":"1.0","lon":[107.71050099999998,107.746994],"marker":{"color":"#DC3912","size":15},"mode":"markers+text","name":"1.0","showlegend":true,"subplot":"mapbox","text":["CP","MJ"],"type":"scattermapbox","textposition":"top center"},{"hovertemplate":"Single=2.0<br>text=%{text}<br>latitude=%{lat}<br>longitude=%{lon}<extra></extra>","lat":[-7.119608000000001],"legendgroup":"2.0","lon":[107.69813500000001],"marker":{"color":"#FF9900","size":15},"mode":"markers+text","name":"2.0","showlegend":true,"subplot":"mapbox","text":["PC"],"type":"scattermapbox","textposition":"top center"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"mapbox":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"center":{"lat":-7.058490857142857,"lon":107.66362042857143},"zoom":8,"style":"carto-positron"},"legend":{"title":{"text":"Single"},"tracegroupgap":0},"margin":{"t":0,"r":0,"l":0,"b":0},"height":500,"width":700},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('7be7cdd8-82c4-4655-b79f-724d77ee6d7f');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<figcaption class="figure-caption">Figure&nbsp;11: Clustering Result Based on Single Method</figcaption>
</figure>
</div>
</div>
<div class="cell" data-executetime="{&quot;end_time&quot;:&quot;2023-11-16T14:38:57.602412Z&quot;,&quot;start_time&quot;:&quot;2023-11-16T14:38:57.529258Z&quot;}" data-execution_count="26">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.scatter_mapbox(data_agg, </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                        lat<span class="op">=</span><span class="st">"latitude"</span>, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                        lon<span class="op">=</span><span class="st">"longitude"</span>, </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                        color<span class="op">=</span><span class="st">'Others'</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                        color_discrete_sequence<span class="op">=</span>px.colors.qualitative.G10,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                        hover_data<span class="op">=</span>{<span class="st">'index'</span>: (data_agg.index)},</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>                        zoom<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                        height<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>                        width<span class="op">=</span><span class="dv">700</span>)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>fig.update_layout(mapbox_style<span class="op">=</span><span class="st">"carto-positron"</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>fig.update_layout(margin<span class="op">=</span>{<span class="st">"r"</span>:<span class="dv">0</span>,<span class="st">"t"</span>:<span class="dv">0</span>,<span class="st">"l"</span>:<span class="dv">0</span>,<span class="st">"b"</span>:<span class="dv">0</span>})</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>fig.update_traces(marker<span class="op">=</span>{<span class="st">'size'</span>: <span class="dv">15</span>})</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-12" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">

<div>                            <div id="ef12ea32-15b7-4ee5-b531-bdf035d74dcb" class="plotly-graph-div" style="height:500px; width:700px;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("ef12ea32-15b7-4ee5-b531-bdf035d74dcb")) {                    Plotly.newPlot(                        "ef12ea32-15b7-4ee5-b531-bdf035d74dcb",                        [{"customdata":[["BL"],["RC"],["SR"]],"hovertemplate":"Others=2.0<br>latitude=%{lat}<br>longitude=%{lon}<br>index=%{customdata[0]}<extra></extra>","lat":[-7.004517,-6.971517,-7.025404],"legendgroup":"2.0","lon":[107.63187799999999,107.75940399999999,107.532008],"marker":{"color":"#3366CC","size":15},"mode":"markers","name":"2.0","showlegend":true,"subplot":"mapbox","type":"scattermapbox"},{"customdata":[["CP"],["MJ"]],"hovertemplate":"Others=1.0<br>latitude=%{lat}<br>longitude=%{lon}<br>index=%{customdata[0]}<extra></extra>","lat":[-7.037803,-7.05468],"legendgroup":"1.0","lon":[107.71050099999998,107.746994],"marker":{"color":"#DC3912","size":15},"mode":"markers","name":"1.0","showlegend":true,"subplot":"mapbox","type":"scattermapbox"},{"customdata":[["PC"],["PL"]],"hovertemplate":"Others=3.0<br>latitude=%{lat}<br>longitude=%{lon}<br>index=%{customdata[0]}<extra></extra>","lat":[-7.119608000000001,-7.195907000000001],"legendgroup":"3.0","lon":[107.69813500000001,107.566423],"marker":{"color":"#FF9900","size":15},"mode":"markers","name":"3.0","showlegend":true,"subplot":"mapbox","type":"scattermapbox"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"mapbox":{"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"center":{"lat":-7.058490857142857,"lon":107.66362042857143},"zoom":8,"style":"carto-positron"},"legend":{"title":{"text":"Others"},"tracegroupgap":0},"margin":{"t":0,"r":0,"l":0,"b":0},"height":500,"width":700},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('ef12ea32-15b7-4ee5-b531-bdf035d74dcb');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
<figcaption class="figure-caption">Figure&nbsp;12: Clustering Result Based on Others Method</figcaption>
</figure>
</div>
</div>
<p>Comparing these two results, I personally prefer the second one, where the regions are separated by latitude coordinate. It is intuitive and easy to interpret. However, we might need more data to make a clear conclusion, such as altitude and water distribution network.</p>
</section>
<section id="clustering-summary" class="level2">
<h2 class="anchored" data-anchor-id="clustering-summary">Clustering Summary</h2>
<p>To summarize the preceding results, Ciparay (<strong>CP</strong>) and Majalengka (<strong>MJ</strong>) are always joined first resulting in <strong>CP-MJ</strong> cluster. In all four results, this <strong>CP-MJ</strong> cluster consistently joined last with a cluster containing the rest of the regions.</p>
<p>On the other side, Rancaekek (<strong>RC</strong>) and Soreang (<strong>SR</strong>) are always be the second points joined then resulting in <strong>RC-SR</strong> cluster. After that, this <strong>RC-SR</strong> cluster will always be joined with Baleendah (<strong>BL</strong>) resulting in <strong>RC-SR-BL</strong> cluster. In the single linkage result, the <strong>RC-SR-BL</strong> cluster is joined with Pangalengan (<strong>PL</strong>), resulting in <strong>RC-SR-BL-PL</strong> cluster, then joined with Pacet (<strong>PC</strong>), resulting in <strong>RC-SR-BL-PL-PC</strong> cluster. However, in other three results, <strong>PC and PL</strong> are joined first resulting in <strong>PC-PL</strong> cluster, then joined with the <strong>RC-SR-BL</strong> cluster, resulting <strong>RC-SR-BL-PL-PC</strong> cluster.</p>
</section>
</section>
<section id="recommendation-and-conclusion" class="level1">
<h1>Recommendation and Conclusion</h1>
<section id="recommendation" class="level2">
<h2 class="anchored" data-anchor-id="recommendation">Recommendation</h2>
<p>As we mentioned before, we will choose to divide regions into three clusters. There are two different clustering results that can be derived:</p>
<ol type="1">
<li><strong>CP-MJ</strong> cluster, <strong>SR-RC-BL-PL</strong> cluster, <strong>PC</strong> cluster (single linkage)</li>
<li><strong>CP-MJ</strong> cluster, <strong>SR-RC-BL</strong> cluster, <strong>PC-PL</strong> cluster (other linkages) Based on our previous analysis, <strong>I recommend the second clustering result</strong>. Why? Firstly, because it is resulted from three different linkage methods, while the first clustering is resulted only from the single linkage method. Secondly, it is supported by geographical data: the second clustering has more intuitive and reasonable distinction based on each regions’ location; also it is more interpretable.</li>
</ol>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In conclusion, the clustering analysis performed in this study has successfully achieved the first objective by grouping well water sources in Bandung into clusters with similar water quality profiles. With our results, we have gained valuable insights into the regional trends that define the well water structure in Bandung. These clusters also provide a clearer understanding of the geographical factors that influence water quality, allowing the government agencies and institutions to produce more precise targeting of treatment strategies.</p>
<p>Moving forward, this knowledge will also encourage society to promote public health and environmental awareness, especially in the quality of well water for the residents of Bandung.</p>
</section>
<section id="reference" class="level2">
<h2 class="anchored" data-anchor-id="reference">Reference</h2>
<p>A.C Rencher. (2002). Methods of Multivariate Analysis 2nd Edition.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>